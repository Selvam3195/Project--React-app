version: 0.0

Resources:
  - my-k8s-service:

    Type: Kubernetes::Service
    Properties:
      TaskDefinition: deployment.yml
      AppSpecContent:
        Files:
          - source: /
            destination: /app

hooks:
  BeforeInstall:
    - location: before_install.sh
      timeout: 180
      runas: root

  AfterInstall:
    - location: after_install.sh
      timeout: 180
      runas: root

  ApplicationStart:
    - location: start_k8s.sh
      timeout: 300
      runas: root

  ValidateService:
    - location: validate.sh
      timeout: 120
      runas: root
